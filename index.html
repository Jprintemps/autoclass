<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Autoclass - Vente de Voitures d'Occasion</title>
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" defer></script>
    <script src="car_BD.js" defer></script>
  </head>
  <body>
    <header class="navbar">
      <div class="container">
        <a href="#home" class="logo">
          <svg
            class="logo-icon"
            viewBox="0 0 24 24"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11C5.84 5 5.28 5.42 5.08 6.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"
            />
          </svg>
          AutoClass
        </a>
        <nav>
          <ul class="nav-links">
            <li><a href="#home">Accueil</a></li>
            <li><a href="#listings">Annonces</a></li>
            <li>
              <a href="#listings?favorites=true"
                >Favoris (<span id="favorites-count">0</span>)</a
              >
            </li>
          </ul>
        </nav>
        <div class="nav-tools">
          <button
            class="theme-switcher"
            id="theme-switcher"
            aria-label="Changer de thème"
          >
            <!-- Nuit (lune et étoiles) -->

            <svg
              class="moon-icon"
              id="moon-icon"
              xmlns="http://www.w3.org/2000/svg"
              version="1.1"
              width="256"
              height="256"
              viewBox="0 0 256 256"
              xml:space="preserve"
            >
              <g
                style="stroke: none; fill: none"
                transform="translate(1.4066 1.4066) scale(2.81 2.81)"
              >
                <circle
                  cx="45"
                  cy="45"
                  r="26.676"
                  style="fill: rgb(26, 26, 26)"
                />
                <path
                  d="M45 11.053c-.552 0-1-.448-1-1V1c0-.552.448-1 1-1s1 .448 1 1v9.053c0 .552-.448 1-1 1z"
                  style="fill: rgb(20, 20, 20)"
                  stroke-linecap="round"
                />
                <path
                  d="M45 90c-.552 0-1-.447-1-1v-9.053c0-.553.448-1 1-1s1 .447 1 1V89c0 .553-.448 1-1 1z"
                  style="fill: rgb(22, 22, 22)"
                  stroke-linecap="round"
                />
                <path
                  d="M10.053 46H1c-.552 0-1-.448-1-1s.448-1 1-1h9.053c.552 0 1 .448 1 1s-.448 1-1 1z"
                  style="fill: rgb(31, 31, 31)"
                  stroke-linecap="round"
                />
                <path
                  d="M89 46h-9.053c-.553 0-1-.448-1-1s.447-1 1-1H89c.553 0 1 .448 1 1s-.447 1-1 1z"
                  style="fill: rgb(26, 26, 26)"
                  stroke-linecap="round"
                />
                <path
                  d="M69.711 21.289a1 1 0 0 1-.707-1.707l6.401-6.401a1 1 0 1 1 1.414 1.414l-6.401 6.401a.996.996 0 0 1-.707.293z"
                  style="fill: rgb(24, 24, 24)"
                  stroke-linecap="round"
                />
                <path
                  d="M13.887 77.112a1 1 0 0 1-.707-1.707l6.401-6.401a1 1 0 0 1 1.414 1.414l-6.401 6.401a.996.996 0 0 1-.707.293z"
                  style="fill: rgb(32, 32, 32)"
                  stroke-linecap="round"
                />
                <path
                  d="M20.289 21.289a.996.996 0 0 1-.707-.293l-6.401-6.401a1 1 0 1 1 1.414-1.414l6.401 6.401a1 1 0 0 1-1.414 1.414z"
                  style="fill: rgb(24, 24, 24)"
                  stroke-linecap="round"
                />
                <path
                  d="M76.112 77.112a.996.996 0 0 1-.707-.293l-6.401-6.401a1 1 0 0 1 1.414-1.414l6.401 6.401a1 1 0 0 1-1.414 1.414z"
                  style="fill: rgb(22, 22, 22)"
                  stroke-linecap="round"
                />
              </g>
            </svg>

            <!-- Jour (soleil et nuages) -->

            <svg
              id="sun-icon"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              version="1.1"
              width="256"
              height="256"
              viewBox="0 0 256 256"
              xml:space="preserve"
            >
              <g
                style="
                  stroke: none;
                  stroke-width: 0;
                  stroke-dasharray: none;
                  stroke-linecap: butt;
                  stroke-linejoin: miter;
                  stroke-miterlimit: 10;
                  fill: none;
                  fill-rule: nonzero;
                  opacity: 1;
                "
                transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)"
              >
                <path
                  d="M 88.174 59.263 c -0.406 -0.246 -0.934 -0.174 -1.258 0.18 c -4.853 5.307 -11.13 8.79 -18.15 10.074 c -8.563 1.564 -17.229 -0.296 -24.395 -5.246 c -7.165 -4.949 -11.974 -12.393 -13.54 -20.959 c -1.567 -8.566 0.296 -17.23 5.246 -24.395 S 48.47 6.943 57.036 5.376 c 1.522 -0.278 3.118 -0.432 5.022 -0.484 c 0.477 -0.013 0.878 -0.361 0.958 -0.831 c 0.081 -0.47 -0.183 -0.932 -0.628 -1.103 c -7.671 -2.936 -16.019 -3.701 -24.137 -2.217 C 13.847 5.205 -2.376 28.69 2.087 53.094 c 2.162 11.822 8.798 22.094 18.686 28.925 c 7.604 5.253 16.429 7.986 25.476 7.986 c 2.719 0 5.459 -0.247 8.189 -0.747 c 15.596 -2.852 28.682 -13.886 34.155 -28.796 C 88.758 60.014 88.583 59.511 88.174 59.263 z"
                  style="
                    stroke: none;
                    stroke-width: 1;
                    stroke-dasharray: none;
                    stroke-linecap: butt;
                    stroke-linejoin: miter;
                    stroke-miterlimit: 10;
                    fill: rgb(233, 233, 233);
                    fill-rule: nonzero;
                    opacity: 1;
                  "
                  transform=" matrix(1 0 0 1 0 0) "
                  stroke-linecap="round"
                />
              </g>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- ======== CONTENEUR DES VUES (PAGES) ======== -->
    <main id="app-router">
      <!-- VUE ACCUEIL -->
      <section id="home-view" class="view">
        <div class="hero">
          <h1>Trouvez la voiture de vos rêves</h1>
          <p>Des milliers de voitures d'occasion vérifiées et garanties.</p>
          <button onclick="location.href='#listings'" class="btn primary-btn">
            Voir les annonces
          </button>
        </div>

        <div class="container" style="padding-top: 4rem">
          <section id="car-of-the-day-section" class="home-section"></section>

          <section class="home-section">
            <h2 class="section-title">Recherche par Image</h2>
            <div class="image-search-box">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                version="1.1"
                width="256"
                height="256"
                viewBox="0 0 256 256"
                xml:space="preserve"
              >
                <g
                  style="
                    stroke: none;
                    stroke-width: 0;
                    stroke-dasharray: none;
                    stroke-linecap: butt;
                    stroke-linejoin: miter;
                    stroke-miterlimit: 10;
                    fill: none;
                    fill-rule: nonzero;
                    opacity: 1;
                  "
                  transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)"
                >
                  <path
                    d="M 71.361 35.557 C 69.67 23.59 59.257 14.281 46.916 14.281 h -3.832 c -12.341 0 -22.753 9.309 -24.444 21.276 C 8.234 36.311 0 45.018 0 55.611 c 0 11.087 9.02 20.107 20.107 20.107 h 15.428 c 1.657 0 3 -1.343 3 -3 s -1.343 -3 -3 -3 H 20.107 C 12.329 69.719 6 63.391 6 55.611 s 6.329 -14.107 14.107 -14.107 h 1.297 c 1.631 0 2.963 -1.303 3 -2.934 c 0.221 -10.084 8.601 -18.289 18.68 -18.289 h 3.832 c 10.078 0 18.459 8.205 18.681 18.289 c 0.035 1.631 1.368 2.934 2.999 2.934 h 1.297 C 77.672 41.504 84 47.832 84 55.611 s -6.328 14.107 -14.107 14.107 H 55.419 C 51.328 69.719 48 66.391 48 62.3 V 47.425 l 3.268 3.268 c 0.586 0.586 1.354 0.879 2.121 0.879 s 1.535 -0.293 2.121 -0.879 c 1.172 -1.171 1.172 -3.07 0 -4.242 l -8.386 -8.386 c -0.543 -0.545 -1.294 -0.882 -2.124 -0.882 c -0.827 0 -1.576 0.335 -2.118 0.876 c -0.001 0.001 -0.002 0.002 -0.003 0.003 L 34.49 46.45 c -1.171 1.172 -1.171 3.071 0 4.242 c 1.171 1.172 3.071 1.172 4.243 0 L 42 47.425 V 62.3 c 0 7.399 6.02 13.419 13.419 13.419 h 14.474 C 80.979 75.719 90 66.698 90 55.611 C 90 45.018 81.765 36.312 71.361 35.557 z"
                    style="
                      stroke: none;
                      stroke-width: 1;
                      stroke-dasharray: none;
                      stroke-linecap: butt;
                      stroke-linejoin: miter;
                      stroke-miterlimit: 10;
                      fill: rgb(228, 228, 228);
                      fill-rule: nonzero;
                      opacity: 1;
                    "
                    transform=" matrix(1 0 0 1 0 0) "
                    stroke-linecap="round"
                  />
                </g>
              </svg>
              <p>
                Vous avez vu une voiture qui vous plaît ? Uploadez sa photo et
                laissez notre IA la retrouver pour vous !
              </p>
              <input
                type="file"
                id="image-upload-input"
                accept="image/*"
                style="display: none"
              />
              <button id="image-upload-btn" class="btn">
                Uploader une image
              </button>
              <div id="image-preview-container"></div>
              <div class="loader" id="image-search-loader"></div>
              <p id="image-search-result"></p>
            </div>
          </section>

          <section class="home-section">
            <h2 class="section-title">Nos nouveautés</h2>
            <div class="car-grid" id="featured-grid"></div>
          </section>
          <section class="home-section">
            <h2 class="section-title">Notre catalogue complet</h2>
            <div class="car-grid" id="all-cars-grid"></div>
            <div style="text-align: center; margin-top: 2rem">
              <a href="#listings" class="btn">Voir toutes les annonces</a>
            </div>
          </section>
        </div>
      </section>

      <!-- VUE ANNONCES -->
      <section id="listings-view" class="view">
        <div class="container listings-page-container">
          <aside class="filters">
            <h3>Filtres</h3>
            <form id="filter-form">
              <div class="filter-group">
                <label for="search-input">Recherche par nom</label
                ><input
                  type="text"
                  id="search-input"
                  placeholder="Model 3, A4..."
                />
              </div>
              <div class="filter-group">
                <label for="make-filter">Marque</label
                ><select id="make-filter"></select>
              </div>
              <div class="filter-group">
                <label for="min-price-filter">Prix Min</label
                ><input
                  type="number"
                  id="min-price-filter"
                  placeholder="5000"
                />
              </div>
              <div class="filter-group">
                <label for="max-price-filter">Prix Max</label
                ><input
                  type="number"
                  id="max-price-filter"
                  placeholder="50000"
                />
              </div>
              <div class="filter-group">
                <label for="min-year-filter">Année Min</label
                ><input type="number" id="min-year-filter" placeholder="2020" />
              </div>
            </form>
          </aside>
          <div class="results">
            <h2 id="listings-title" class="section-title">Nos Annonces</h2>
            <div id="sorting-options">
              <select id="sort-by">
                <option value="default">Trier par défaut</option>
                <option value="price-asc">Prix: Croissant</option>
                <option value="price-desc">Prix: Décroissant</option>
                <option value="year-desc">Plus récentes</option>
                <option value="year-asc">Plus anciennes</option>
              </select>
            </div>
            <div class="car-grid" id="listings-grid"></div>
          </div>
        </div>
      </section>

      <!-- VUE DÉTAILS -->
      <section id="details-view" class="view">
        <div class="container">
          <div class="details-container">
            <div class="image-gallery">
              <div class="main-image">
                <img id="main-car-image" alt="Image principale" />
              </div>
              <div class="thumbnails" id="thumbnails-container"></div>
            </div>
            <div class="car-main-info">
              <div class="car-info">
                <h1 id="car-title"></h1>
                <p class="price" id="car-price"></p>
                <p id="car-description"></p>
                <div class="spec-sheet">
                  <ul id="spec-sheet-list"></ul>
                </div>
              </div>
              <div class="details-actions">
                <a href="#" id="order-btn" class="btn">Commander ce véhicule</a>
              </div>
              <div class="gemini-features">
                <h3>Assistant IA ✨</h3>
                <button id="generate-description-btn" class="gemini-button">
                  Ré-écrire la description
                </button>
                <div class="loader" id="description-loader"></div>

                <div class="gemini-feature-section">
                  <h4>Tableau Comparatif IA</h4>
                  <input
                    type="text"
                    id="comparison-input"
                    placeholder="Ex: Volkswagen Golf"
                  />
                  <button id="compare-btn" class="gemini-button">
                    Comparer
                  </button>
                  <div class="loader" id="comparison-loader"></div>
                  <div class="gemini-output" id="comparison-output"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- VUE COMMANDE -->
      <section id="order-view" class="view order-view">
        <div class="order-container">
          <h2 class="section-title">Finaliser ma commande</h2>
          <div class="progress-bar">
            <div class="progress-bar-line"></div>
            <div class="progress-step active" data-step="1">
              <div class="progress-step-circle">1</div>
              <p>Récapitulatif</p>
            </div>
            <div class="progress-step" data-step="2">
              <div class="progress-step-circle">2</div>
              <p>Vos Coordonnées</p>
            </div>
            <div class="progress-step" data-step="3">
              <div class="progress-step-circle">3</div>
              <p>Paiement</p>
            </div>
            <div class="progress-step" data-step="4">
              <div class="progress-step-circle">4</div>
              <p>Confirmation</p>
            </div>
          </div>
          <form id="order-form">
            <!-- Step 1 -->
            <div class="form-step active" data-step="1">
              <h3>Récapitulatif de votre choix</h3>
              <div id="order-summary"></div>
            </div>
            <!-- Step 2 -->
            <div class="form-step" data-step="2">
              <h3>Informations personnelles</h3>
              <div class="filter-group">
                <label for="fullName">Nom complet</label>
                <input type="text" id="fullName" required />
              </div>
              <div class="filter-group">
                <label for="email">Email</label>
                <input type="email" id="email" required />
              </div>
              <div class="filter-group">
                <label for="phone">Téléphone</label>
                <input type="tel" id="phone" required />
              </div>
            </div>
            <!-- Step 3 -->
            <div class="form-step" data-step="3">
              <h3>Option de paiement</h3>
              <div class="filter-group">
                <input
                  type="radio"
                  name="payment"
                  id="cash"
                  value="cash"
                  checked
                />
                <label for="cash">Paiement comptant par virement</label>
              </div>
              <div class="filter-group">
                <input
                  type="radio"
                  name="payment"
                  id="finance"
                  value="finance"
                />
                <label for="finance">Demande de financement</label>
              </div>
            </div>
            <!-- Step 4 -->
            <div class="form-step" data-step="4">
              <h3>Confirmer et envoyer</h3>
              <p>
                Veuillez vérifier vos informations avant de soumettre votre
                commande.
              </p>
              <div id="final-summary"></div>
            </div>

            <div class="form-navigation">
              <button
                type="button"
                class="btn"
                id="prev-btn"
                style="display: none"
              >
                Précédent
              </button>
              <button type="button" class="btn" id="next-btn">Suivant</button>
              <button
                type="submit"
                class="btn"
                id="submit-btn"
                style="display: none"
              >
                Confirmer ma commande
              </button>
            </div>
          </form>
        </div>
      </section>

      <!-- VUE CONFIRMATION -->
      <section id="confirmation-view" class="view confirmation-view">
        <div class="confirmation-box">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
            />
          </svg>
          <h2>Merci pour votre commande !</h2>
          <p>
            Votre demande a bien été enregistrée. Nous allons la traiter dans
            les plus brefs délais.
          </p>
          <div class="gemini-features">
            <h3>Prochaines étapes (généré par IA)</h3>
            <div class="loader" id="confirmation-loader"></div>
            <p id="next-steps-ai"></p>
          </div>
          <br />
          <a href="#home" class="btn">Retour à l'accueil</a>
        </div>
      </section>
    </main>

    <!-- ======== PIED DE PAGE ======== -->
    <footer class="footer">
      <p>&copy; 2025 AutoClass. Tous droits réservés.</p>
    </footer>

    <!-- MODAL DE VISUALISATION D'IMAGE -->
    <div class="image-modal" id="image-modal">
      <button class="modal-close">&times;</button>
      <button class="modal-nav modal-prev">&#10094;</button>
      <img id="modal-image" src="" alt="Image agrandie" />
      <button class="modal-nav modal-next">&#10095;</button>
    </div>
    
  </body>
</html>
